<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistente Docente PNFT ¬∑ MEP 2026 ¬∑ Versi√≥n Inclusiva</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- html2pdf -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <!-- FileSaver -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        * { font-family: 'Poppins', sans-serif; }
        
        :root {
            --primary-teal: #09b7ae;
            --secondary-teal: #0bd2ce;
            --primary-dark: #014d6b;
            --secondary-dark: #0b6284;
            --primary-purple: #45258f;
            --primary-green: #9ed16f;
            --neutral-gray: #c9c9c9;
        }
        
        .high-contrast { filter: contrast(1.2); }
        
        .saber-chip {
            user-select: none;
            cursor: pointer;
            transition: all 0.2s;
            background-color: #f3f4f6;
            border: 1px solid #d1d5db;
        }
        
        .saber-chip.selected {
            background-color: var(--primary-teal);
            color: white;
            border-color: var(--primary-dark);
        }
        
        .video-result {
            transition: all 0.2s;
            border-left: 4px solid transparent;
        }
        
        .video-result:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(1, 77, 107, 0.1);
            border-left-color: var(--primary-teal);
        }
        
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
    </style>
</head>
<body class="bg-gray-50 p-4 md:p-8 high-contrast">

    <div class="max-w-7xl mx-auto">
        <!-- ========== HEADER ========== -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
            <div class="flex items-center gap-4">
                <div class="w-16 h-16 bg-gradient-to-br from-[#014d6b] to-[#45258f] rounded-2xl flex items-center justify-center shadow-lg">
                    <i class="fas fa-universal-access text-white text-3xl"></i>
                </div>
                <div>
                    <h1 class="text-3xl font-bold text-[#014d6b]">Asistente Docente <span class="text-[#45258f]">PNFT</span></h1>
                    <p class="text-sm text-gray-500">Programa Nacional de Formaci√≥n Tecnol√≥gica ¬∑ MEP 2026</p>
                    <p class="text-xs text-[#09b7ae] font-medium">186 saberes ¬∑ DUA ¬∑ Inclusi√≥n ¬∑ IA</p>
                </div>
            </div>
            <div class="flex gap-2">
                <span class="bg-[#09b7ae] text-white text-xs px-3 py-1 rounded-full">v3.0</span>
                <span class="bg-[#9ed16f] text-[#014d6b] text-xs px-3 py-1 rounded-full">‚ú® Completo</span>
            </div>
        </div>

        <!-- ========== TABS ========== -->
        <div class="border-b border-gray-200 flex flex-wrap gap-1 text-sm font-medium mb-6">
            <button id="tabPlanBtn" class="tab-btn px-6 py-3 rounded-t-lg bg-white text-[#014d6b] border-b-3 border-[#014d6b] shadow-sm flex items-center gap-2">
                <i class="fas fa-calendar-alt"></i> Planificador
            </button>
            <button id="tabRecursosBtn" class="tab-btn px-6 py-3 rounded-t-lg bg-gray-100 text-gray-600 hover:bg-gray-50 flex items-center gap-2">
                <i class="fas fa-hand-holding-heart"></i> Recursos y Apoyos DUA
            </button>
            <button id="tabAdminBtn" class="tab-btn px-6 py-3 rounded-t-lg bg-gray-100 text-gray-600 hover:bg-gray-50 flex items-center gap-2">
                <i class="fas fa-chart-simple"></i> Administraci√≥n
            </button>
        </div>

        <!-- ========== PESTA√ëA 1: PLANIFICADOR ========== -->
        <div id="tabPlan" class="tab-content block">
            <!-- Selectores -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                <div>
                    <label class="block text-sm font-medium text-gray-600 mb-1"><i class="fas fa-layer-group mr-1 text-[#09b7ae]"></i>Ciclo</label>
                    <select id="cicloSelect" class="w-full p-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-[#09b7ae]">
                        <option value="preescolar">Ciclo Materno Infantil (Gpo II) y Transici√≥n</option>
                        <option value="I">I Ciclo (I, II, III grado)</option>
                        <option value="II">II Ciclo (IV, V, VI grado)</option>
                        <option value="III">III Ciclo (VII, VIII, IX)</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-600 mb-1"><i class="fas fa-graduation-cap mr-1 text-[#0b6284]"></i>Nivel</label>
                    <select id="nivelSelect" class="w-full p-3 border border-gray-300 rounded-xl shadow-sm"></select>
                </div>
                <div class="flex items-end">
                    <p class="text-xs text-gray-400 italic flex items-center"><i class="fas fa-info-circle mr-1 text-[#45258f]"></i>186 saberes disponibles</p>
                </div>
            </div>

            <!-- √ÅREAS DE CONOCIMIENTO -->
            <div class="grid grid-cols-4 gap-2 mb-3 text-center font-semibold text-gray-600 text-sm">
                <div class="bg-[#09b7ae] bg-opacity-10 p-2 rounded-t-xl border-b-2 border-[#09b7ae]">Apropiaci√≥n</div>
                <div class="bg-[#0bd2ce] bg-opacity-10 p-2 rounded-t-xl border-b-2 border-[#0bd2ce]">Programaci√≥n</div>
                <div class="bg-[#45258f] bg-opacity-10 p-2 rounded-t-xl border-b-2 border-[#45258f]">Computaci√≥n f√≠sica</div>
                <div class="bg-[#9ed16f] bg-opacity-10 p-2 rounded-t-xl border-b-2 border-[#9ed16f]">Ciencia de datos / IA</div>
            </div>

            <!-- GALER√çA DE SABERES -->
            <div class="flex flex-col lg:flex-row gap-6">
                <div class="flex-1 bg-white rounded-2xl shadow-md border border-gray-200 p-5">
                    <h3 class="text-lg font-bold text-[#014d6b] mb-2 flex items-center">
                        <span class="bg-[#014d6b] text-white text-sm px-3 py-1 rounded-full mr-3">M√≥dulo 1</span> Saberes conceptuales
                    </h3>
                    <div id="modulo1Container" class="space-y-6 max-h-[600px] overflow-y-auto pr-2"></div>
                </div>
                <div class="flex-1 bg-white rounded-2xl shadow-md border border-gray-200 p-5">
                    <h3 class="text-lg font-bold text-[#0b6284] mb-2 flex items-center">
                        <span class="bg-[#0b6284] text-white text-sm px-3 py-1 rounded-full mr-3">M√≥dulo 2</span> Saberes conceptuales
                    </h3>
                    <div id="modulo2Container" class="space-y-6 max-h-[600px] overflow-y-auto pr-2"></div>
                </div>
            </div>

            <!-- Botones de acci√≥n -->
            <div class="mt-8 bg-blue-50/70 border border-blue-200 rounded-2xl p-5">
                <div class="flex flex-wrap items-center gap-4">
                    <div class="bg-white px-4 py-2 rounded-full shadow-sm text-sm font-medium">
                        <i class="fas fa-check-circle text-green-500 mr-1"></i>Seleccionados: <span id="contadorSel">0</span>/2
                    </div>
                    <div id="saberesSeleccionadosList" class="flex flex-wrap gap-2 flex-1 text-sm"></div>
                    <button id="generarPromptBtn" class="bg-[#014d6b] hover:bg-[#0b6284] text-white px-6 py-3 rounded-xl font-semibold flex items-center gap-2 shadow-md transition">
                        <i class="fas fa-wand-magic-sparkles"></i> Generar prompt
                    </button>
                    <button id="sugerirJuegoBtn" class="bg-[#9ed16f] hover:bg-green-500 text-[#014d6b] px-6 py-3 rounded-xl font-semibold flex items-center gap-2 shadow-md transition">
                        <i class="fas fa-gamepad"></i> Crear juego con IA
                    </button>
                </div>

                <!-- Prompt editable -->
                <div class="mt-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                        <i class="fas fa-terminal mr-2 text-[#45258f]"></i>Prompt para IA (editable):
                    </label>
                    <textarea id="promptSalida" rows="4" class="w-full p-3 bg-gray-900 text-gray-100 rounded-xl text-sm font-mono border border-gray-700 focus:ring-2 focus:ring-[#09b7ae]">Selecciona hasta dos saberes y haz clic en generar.</textarea>
                </div>

                <!-- Indicadores -->
                <div id="indicadoresContainer" class="mt-6 hidden"></div>

                <!-- Botones exportar -->
                <div class="flex justify-end gap-2 mt-4">
                    <button id="exportarPDFBtn" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-xl text-sm flex items-center gap-2">
                        <i class="fas fa-file-pdf"></i> PDF
                    </button>
                    <button id="exportarWordBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl text-sm flex items-center gap-2">
                        <i class="fas fa-file-word"></i> Word
                    </button>
                </div>
            </div>
        </div>

        <!-- ========== PESTA√ëA 2: RECURSOS Y APOYOS DUA ========== -->
        <div id="tabRecursos" class="tab-content hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Buscador YouTube -->
                <div class="bg-white p-6 rounded-2xl shadow-md border border-yellow-200">
                    <h2 class="text-xl font-bold text-yellow-700 flex items-center gap-2 mb-4">
                        <i class="fas fa-universal-access"></i> Videoteca inclusiva (DUA)
                    </h2>
                    
                    <div class="mb-4 p-3 bg-gray-50 rounded-lg text-sm">
                        <details>
                            <summary class="font-medium text-[#014d6b] cursor-pointer">
                                <i class="fas fa-key mr-1"></i> Configurar API keys
                            </summary>
                            <div class="mt-3 space-y-2">
                                <input type="text" id="ytApiKey" placeholder="YouTube Data API Key" class="w-full p-2 border rounded-lg text-xs">
                                <input type="text" id="hfApiKey" placeholder="Hugging Face API Key" class="w-full p-2 border rounded-lg text-xs">
                                <p class="text-xs text-gray-500">Las keys se guardan localmente</p>
                            </div>
                        </details>
                    </div>

                    <div class="flex gap-2 mb-4">
                        <input type="text" id="youtubeSearch" placeholder="Ej: pensamiento computacional ni√±os" class="flex-1 p-3 border border-gray-300 rounded-lg">
                        <button id="buscarYoutubeBtn" class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg flex items-center gap-2">
                            <i class="fab fa-youtube"></i> Buscar
                        </button>
                    </div>

                    <div class="flex flex-wrap gap-2 mb-3 text-xs">
                        <span class="bg-green-100 text-green-700 px-2 py-1 rounded-full"><i class="fas fa-closed-captioning mr-1"></i>Subt√≠tulos</span>
                        <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded-full"><i class="fas fa-clock mr-1"></i>Menos de 4 min</span>
                        <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded-full"><i class="fas fa-graduation-cap mr-1"></i>Canales educativos</span>
                    </div>

                    <div id="youtubeResultados" class="space-y-3 max-h-96 overflow-y-auto"></div>
                </div>

                <!-- Generador de juegos -->
                <div class="bg-white p-6 rounded-2xl shadow-md border border-green-100">
                    <h2 class="text-xl font-bold text-green-700 flex items-center gap-2 mb-4">
                        <i class="fas fa-robot"></i> Generador de juegos con IA
                    </h2>
                    
                    <div id="juegoGenerado" class="bg-green-50 p-4 rounded-xl border border-green-200 min-h-[200px]">
                        <p class="text-gray-500 italic text-center">Selecciona saberes y haz clic en "Crear juego con IA"</p>
                    </div>
                    
                    <button id="crearJuegoBtn" class="mt-4 w-full bg-[#9ed16f] hover:bg-green-500 text-[#014d6b] font-semibold py-3 rounded-xl flex items-center justify-center gap-2">
                        <i class="fas fa-magic"></i> Crear juego con IA
                    </button>
                </div>

                <!-- Banco DUA -->
                <div class="lg:col-span-2 bg-white p-6 rounded-2xl shadow-md border border-purple-100">
                    <h2 class="text-xl font-bold text-[#45258f] flex items-center gap-2 mb-4">
                        <i class="fas fa-hands-helping"></i> Banco de actividades DUA
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">
                        <div class="bg-gray-50 p-3 rounded-lg border-l-4 border-[#014d6b]">
                            <span class="font-medium text-[#014d6b]">üëÅÔ∏è Visual:</span> Circuitos t√°ctiles, algoritmos sonoros
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg border-l-4 border-[#0b6284]">
                            <span class="font-medium text-[#0b6284]">ü¶æ Motriz:</span> Bloques gigantes, programaci√≥n por voz
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg border-l-4 border-[#45258f]">
                            <span class="font-medium text-[#45258f]">üß† Cognitiva:</span> Pictogramas, secuencias cortas
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg border-l-4 border-[#9ed16f]">
                            <span class="font-medium text-[#9ed16f]">ü¶ª Auditiva:</span> Instrucciones escritas, subt√≠tulos
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== PESTA√ëA 3: ADMINISTRACI√ìN ========== -->
        <div id="tabAdmin" class="tab-content hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-2xl shadow-md">
                    <h2 class="text-xl font-bold text-gray-700 flex items-center gap-2 mb-4">
                        <i class="fas fa-clock-rotate-left text-[#0b6284]"></i> B√∫squedas recientes
                    </h2>
                    <ul id="recentList" class="list-disc pl-5 space-y-1 text-sm text-gray-600"></ul>
                    <button id="clearRecentBtn" class="mt-4 text-xs bg-gray-200 px-3 py-1 rounded-full hover:bg-gray-300">
                        <i class="fas fa-trash-alt mr-1"></i> Limpiar
                    </button>
                </div>

                <div class="bg-white p-6 rounded-2xl shadow-md border-l-4 border-[#014d6b]">
                    <h2 class="text-xl font-bold text-[#014d6b] flex items-center gap-2 mb-4">
                        <i class="fas fa-clipboard-list"></i> Bit√°cora DUA
                    </h2>
                    <textarea id="bitacoraTexto" rows="8" class="w-full border p-3 rounded-xl text-sm" placeholder="Registro de adecuaciones..."></textarea>
                    <div class="flex gap-2 mt-3">
                        <button id="copiarBitacora" class="bg-[#014d6b] hover:bg-[#0b6284] text-white px-4 py-2 rounded-xl text-sm flex items-center gap-2">
                            <i class="fas fa-copy"></i> Copiar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center text-xs text-gray-400 mt-10 border-t pt-5">
            ¬© PNFT-DRTE ¬∑ MEP 2026 ¬∑ 186 saberes ¬∑ DUA ¬∑ IA
        </div>
    </div>

    <!-- ========== MODAL DE HERRAMIENTAS ========== -->
    <div id="herramientasModal" class="fixed inset-0 modal-overlay hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl max-w-2xl w-full mx-4 p-6 shadow-2xl">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-[#014d6b] flex items-center gap-2">
                    <i class="fas fa-tools"></i> Crear con IA
                </h3>
                <button id="cerrarModal" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            
            <p class="text-sm text-gray-600 mb-4">
                Saberes: <span id="modalSaberes" class="font-medium text-[#09b7ae]"></span>
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="border rounded-xl p-4 hover:shadow-lg transition cursor-pointer herramienta-card" data-url="https://copilot.microsoft.com">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                            <i class="fab fa-microsoft text-blue-600 text-xl"></i>
                        </div>
                        <div><h4 class="font-semibold">Copilot</h4><p class="text-xs">Microsoft</p></div>
                    </div>
                </div>
                <div class="border rounded-xl p-4 hover:shadow-lg transition cursor-pointer herramienta-card" data-url="https://chat.openai.com">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-comment-dots text-green-600 text-xl"></i>
                        </div>
                        <div><h4 class="font-semibold">ChatGPT</h4><p class="text-xs">OpenAI</p></div>
                    </div>
                </div>
                <div class="border rounded-xl p-4 hover:shadow-lg transition cursor-pointer herramienta-card" data-url="https://genially.com/es/">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-presentation text-pink-600 text-xl"></i>
                        </div>
                        <div><h4 class="font-semibold">Genially</h4><p class="text-xs">Interactivos</p></div>
                    </div>
                </div>
                <div class="border rounded-xl p-4 hover:shadow-lg transition cursor-pointer herramienta-card" data-url="https://www.educaplay.com/editor-de-recursos/">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-[#09b7ae] bg-opacity-20 rounded-full flex items-center justify-center">
                            <i class="fas fa-puzzle-piece text-[#014d6b] text-xl"></i>
                        </div>
                        <div><h4 class="font-semibold">Educaplay</h4><p class="text-xs">Juegos</p></div>
                    </div>
                </div>
            </div>

            <div class="mt-6 pt-4 border-t border-gray-200">
                <p class="text-sm font-medium text-gray-700 mb-2">üîç B√∫squeda en Educaplay:</p>
                <div class="flex gap-2">
                    <input type="text" id="busquedaEducaplay" class="flex-1 p-2 border border-gray-300 rounded-lg">
                    <button id="buscarEducaplayBtn" class="bg-[#09b7ae] hover:bg-[#014d6b] text-white px-4 py-2 rounded-lg">
                        <i class="fas fa-search"></i> Buscar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== BASE DE DATOS COMPLETA (186 SABERES) ==========
        const saberesDB = {
            preescolar: {
                modulo1: {
                    apropiacion: [
                        { saber: "Computadora", indicador: "Identifica qu√© es una **computadora** y algunas de sus caracter√≠sticas, a partir de experiencias pr√°cticas de interacci√≥n con dispositivos digitales." },
                        { saber: "Software", indicador: "Reconoce elementos visuales b√°sicos de la interfaz de **software** (iconos, botones, ventanas), interactuando con ellos mediante el uso guiado de dispositivos digitales." },
                        { saber: "Herramientas de creaci√≥n de contenido multimedia", indicador: "Reconoce las **herramientas de creaci√≥n de contenido multimedia** seg√∫n su utilidad: editor gr√°fico, grabadora de audio y video, en la creaci√≥n de recursos digitales." },
                        { saber: "Hardware (√≥ptimo)", indicador: "Reconoce componentes b√°sicos del **hardware**, como dispositivos de entrada y salida de datos, explorando su funci√≥n al encender, usar o interactuar con la computadora en actividades cotidianas." },
                        { saber: "Internet (√≥ptimo)", indicador: "Reconoce qu√© es **Internet** y los requerimientos de un dispositivo para conectarse a Internet, realizando una exploraci√≥n dirigida." }
                    ],
                    programacion: [
                        { saber: "Entornos de programaci√≥n iconogr√°fico", indicador: "Reconoce el **entorno de programaci√≥n iconogr√°fico**, interactuando con bloques de la interfaz, como desplazamiento, apariencia o sonido, mediante el uso guiado del docente." },
                        { saber: "Lateralidad y orientaci√≥n espacial", indicador: "Reconoce los conceptos de **lateralidad y orientaci√≥n espacial** en la construcci√≥n de secuencias de acciones para la soluci√≥n de retos de programaci√≥n." },
                        { saber: "Evento", indicador: "Reconoce que un **evento** desencadena una acci√≥n, identificando la relaci√≥n de causa y efecto en juegos o actividades." }
                    ],
                    computacion: [],
                    ciencia: []
                },
                modulo2: {
                    apropiacion: [
                        { saber: "Conexi√≥n entre dispositivos (bluetooth)", indicador: "Reconoce la **conexi√≥n entre dispositivos** por bluetooth y los requerimientos de dispositivos digitales para conectarse, a trav√©s de una exploraci√≥n dirigida." },
                        { saber: "Conexi√≥n entre dispositivos (wifi - √≥ptimo)", indicador: "Reconoce formas de **conexi√≥n entre dispositivos** por bluetooth y wifi, as√≠ como los requerimientos de dispositivos digitales para conectarse, a trav√©s de una exploraci√≥n dirigida." }
                    ],
                    programacion: [
                        { saber: "Estado", indicador: "Reconoce el concepto de **estado** programando objetos que modifican las propiedades de orientaci√≥n y/o direcci√≥n." },
                        { saber: "Algoritmo", indicador: "Reconoce el concepto de **algoritmo** mediante secuencias de acciones l√≥gicas y ordenadas, en la construcci√≥n de soluciones a desaf√≠os propuestos." },
                        { saber: "Dato (programaci√≥n)", indicador: "Reconoce la importancia del **dato** en contexto f√≠sico y en contexto digital mientras soluciona desaf√≠os propuestos." },
                        { saber: "Estructuras repetitivas (ciclo finito/infinito)", indicador: "Reconoce **estructuras repetitivas** en secuencias de acciones durante la programaci√≥n guiada de objetos digitales, distinguiendo si una acci√≥n se repite un n√∫mero limitado o ilimitado de veces." }
                    ],
                    computacion: [
                        { saber: "Robot", indicador: "Reconoce qu√© es un **robot**, sus componentes y algunos de sus usos, mediante actividades l√∫dicas de exploraci√≥n o programaci√≥n guiada." },
                        { saber: "Componentes del robot (cuerpo, sistema sensorial, control)", indicador: "Identifica diferentes partes de un robot, como cuerpo, sistema sensorial y control, mediante actividades l√∫dicas de exploraci√≥n." },
                        { saber: "Clasificaci√≥n de robots por su uso", indicador: "Identifica los robots seg√∫n su uso, clasific√°ndolos en actividades cotidianas." }
                    ],
                    ciencia: [
                        { saber: "Dato (ciencias de datos - texto, imagen, sonido, video)", indicador: "Identifica el **dato** y su importancia en situaciones cotidianas, reconociendo diferentes tipos como texto, imagen, sonido o video." },
                        { saber: "Estrategias para presentar datos (gr√°ficos pict√≥ricos)", indicador: "Reconoce gr√°ficos pict√≥ricos como **estrategia para representar datos** recolectados en actividades l√∫dicas." },
                        { saber: "Visualizaci√≥n de datos (√≥ptimo)", indicador: "Interpreta gr√°ficos pict√≥ricos como parte de la **visualizaci√≥n de datos** (colores, formas, cantidades), con apoyo del docente, relacion√°ndolos con datos conocidos del entorno." },
                        { saber: "Realidad aumentada (√≥ptimo)", indicador: "Experimenta con **realidad aumentada** en entornos f√≠sicos mediante actividades sensoriales y l√∫dicas, con acompa√±amiento del docente." }
                    ]
                }
            },
            I: {
                modulo1: {
                    apropiacion: [
                        { saber: "Computadora", indicador: "Reconoce la **computadora** como una herramienta tecnol√≥gica, identificando sus caracter√≠sticas b√°sicas, funciones e importancia en la vida cotidiana, por medio de la observaci√≥n y manipulaci√≥n pr√°ctica." },
                        { saber: "Hardware (entrada, procesamiento, almacenamiento, salida)", indicador: "Identifica el **hardware** b√°sico de una computadora, reconociendo dispositivos de entrada, salida y las acciones de encendido y apagado, mediante actividades pr√°cticas guiadas." },
                        { saber: "Software", indicador: "Identifica el **software** de una computadora, reconociendo los elementos b√°sicos de la interfaz de usuario mediante actividades pr√°cticas guiadas." },
                        { saber: "Herramientas de productividad (procesador de texto)", indicador: "Utiliza **herramientas de productividad** como el procesador de texto, reconociendo la cinta de opciones, pesta√±as y comandos b√°sicos, as√≠ como sus funciones por teclado, durante la creaci√≥n de textos sencillos." },
                        { saber: "Herramientas de creaci√≥n multimedia (audio, imagen)", indicador: "Utiliza **herramientas de creaci√≥n de contenido multimedia**, como la grabadora de audio y editores de gr√°ficos, aplicando funciones b√°sicas como crear, editar y guardar archivos, durante actividades guiadas de producci√≥n digital en el aula." },
                        { saber: "Conexi√≥n entre dispositivos (bluetooth)", indicador: "Reconoce el bluetooth como medio de **conexi√≥n entre dispositivos** utilizando dispositivos digitales en el aula." },
                        { saber: "Internet", indicador: "Reconoce los dispositivos y programas que permiten la conexi√≥n para la navegaci√≥n en **Internet**." },
                        { saber: "Redes de comunicaci√≥n", indicador: "Describe qu√© son las **redes de comunicaci√≥n** y c√≥mo funciona una red local, a partir de la observaci√≥n y la pr√°ctica de intercambio de informaci√≥n entre dispositivos conectados en el aula." },
                        { saber: "Gesti√≥n de archivos", indicador: "Reconoce la **gesti√≥n de archivos** como proceso para la organizaci√≥n y clasificaci√≥n de la informaci√≥n, mediante el uso de carpetas, subcarpetas y la exploraci√≥n de archivos digitales." },
                        { saber: "Herramienta de productividad (editor de presentaciones)", indicador: "Utiliza **herramientas de productividad**, como el editor de presentaciones, empleando la cinta de opciones, pesta√±as, comandos b√°sicos y sus funciones por teclado en la elaboraci√≥n de presentaciones digitales." }
                    ],
                    programacion: [
                        { saber: "Entornos de programaci√≥n iconogr√°fico", indicador: "Reconoce elementos b√°sicos de un **entorno de programaci√≥n iconogr√°fico**, como bloques de desplazamiento, orientaci√≥n, apariencia, sonido, eventos y control, mediante la navegaci√≥n en la interfaz con actividades guiadas." },
                        { saber: "Entorno de programaci√≥n por bloques", indicador: "Aplica el uso del **entorno de programaci√≥n por bloques**, explorando la interfaz y el √°rea de bloques mientras construye secuencias de acciones que representen historias cotidianas." },
                        { saber: "Reconocimiento de patrones", indicador: "**Reconoce patrones** de movimiento en secuencias de instrucciones simples para que un personaje siga una ruta desde un punto de inicio hasta un punto de llegada." },
                        { saber: "Estado", indicador: "Reconoce el **estado** de un objeto digital en relaci√≥n con su orientaci√≥n, direcci√≥n y tama√±o, identificando variaciones en dichos atributos, mediante secuencias de programaciones simples." },
                        { saber: "Algoritmo", indicador: "Identifica un **algoritmo** en situaciones de la vida diaria, reconociendo secuencias l√≥gicas y ordenadas de acciones, para ser representadas de forma anal√≥gica (dibujos, tarjetas, gestos) y/o digital (entorno iconogr√°fico)." },
                        { saber: "Evento", indicador: "Reconoce el **evento** como relaci√≥n de causa y efecto al participar en juegos anal√≥gicos, identificando c√≥mo una acci√≥n provoca una respuesta o cambio observable durante la din√°mica." },
                        { saber: "Dato", indicador: "Identifica el **dato** en situaciones de la vida diaria, reconociendo informaci√≥n valiosa en contextos f√≠sicos (como etiquetas, se√±ales, objetos) y digitales (como im√°genes, √≠conos o pantallas interactivas)." },
                        { saber: "Variable", indicador: "Identifica una **variable** en contextos de la vida cotidiana, observando elementos que cambian en relaci√≥n con otros (como edad, cantidad, clima o tiempo de actividad)." },
                        { saber: "Estructuras repetitivas", indicador: "Reconoce **estructuras repetitivas** al identificar ciclos finitos (como una canci√≥n o rutina) e infinitos (como el tic-tac del reloj o el movimiento del ventilador) en situaciones de la vida diaria." },
                        { saber: "Operadores aritm√©ticos", indicador: "Reconoce los **operadores aritm√©ticos** de suma y resta en situaciones de la vida cotidiana y su uso en un entorno de programaci√≥n por bloques." },
                        { saber: "Operador relacional", indicador: "Reconoce el **operador relacional** 'igual que' en situaciones de la vida cotidiana y su uso en un entorno de programaci√≥n por bloques." }
                    ],
                    computacion: [],
                    ciencia: []
                },
                modulo2: {
                    apropiacion: [
                        { saber: "Herramientas de creaci√≥n multimedia (audio, imagen)", indicador: "Utiliza **herramientas de creaci√≥n de contenido multimedia** para la creaci√≥n de audios e im√°genes durante actividades guiadas de producci√≥n digital en el aula." },
                        { saber: "Conexi√≥n entre dispositivos (bluetooth)", indicador: "Reconoce el bluetooth como medio de **conexi√≥n entre dispositivos** utilizando dispositivos digitales en el aula." },
                        { saber: "Internet", indicador: "Aplica normas b√°sicas de navegaci√≥n por **internet**, para acceder a p√°ginas educativas seguras, bajo acompa√±amiento del docente." },
                        { saber: "Navegador", indicador: "Identifica el **navegador** como una herramienta digital, reconociendo sus partes y usos en actividades de exploraci√≥n guiada por el docente." },
                        { saber: "Buscador", indicador: "Identifica el **buscador** como una herramienta digital para acceder a informaci√≥n, distinguiendo sitios confiables y no confiables durante la exploraci√≥n dirigida en buscadores infantiles." },
                        { saber: "Netiqueta", indicador: "Identifica normas b√°sicas de **netiqueta** que deben seguir al participar en diferentes procesos de comunicaci√≥n." },
                        { saber: "Comunicaci√≥n y colaboraci√≥n sincr√≥nica/asincr√≥nica", indicador: "Identifica el correo electr√≥nico como una herramienta de **comunicaci√≥n asincr√≥nica**, reconociendo sus caracter√≠sticas y su uso en actividades digitales guiadas." },
                        { saber: "Huella digital", indicador: "Reconoce qu√© es la **huella digital** y c√≥mo puede afectar su privacidad y seguridad en l√≠nea, identificando que sus acciones en Internet dejan rastros que deben cuidarse." },
                        { saber: "Software malicioso", indicador: "Reconoce el virus inform√°tico como un tipo de **software malicioso**, explicando de forma sencilla sus consecuencias, como p√©rdida de informaci√≥n o mal funcionamiento en los dispositivos." },
                        { saber: "Riesgo en l√≠nea", indicador: "Reconoce algunos **riesgos en l√≠nea** como los perfiles falsos, la p√©rdida de privacidad, el contacto con extra√±os y la adicci√≥n al uso de dispositivos, identificando medidas b√°sicas para protegerse." },
                        { saber: "Medidas de seguridad web", indicador: "Reconoce el control parental como una **medida de seguridad web** en el uso de Internet que protege frente a riesgos y limita el acceso a contenido inapropiado." }
                    ],
                    programacion: [
                        { saber: "Estructuras repetitivas", indicador: "Identifica **estructuras repetitivas** en actividades programadas, diferenciando entre ciclos finitos e infinitos seg√∫n la cantidad de repeticiones requeridas." },
                        { saber: "Estructuras condicionales (simples)", indicador: "Aplica **estructuras condicionales** simples en un entorno de programaci√≥n por bloques en la resoluci√≥n de un ejercicio programado." },
                        { saber: "Operadores aritm√©ticos", indicador: "Reconoce los **operadores aritm√©ticos** de suma y resta en situaciones de la vida cotidiana y su uso en un entorno de programaci√≥n por bloques." },
                        { saber: "Operador relacional ('igual que')", indicador: "Reconoce el **operador relacional** 'igual que' en situaciones de la vida cotidiana y su uso en un entorno de programaci√≥n por bloques." }
                    ],
                    computacion: [],
                    ciencia: [
                        { saber: "Fundamentos de la IA", indicador: "Reconoce los **fundamentos de la inteligencia artificial** a trav√©s de objetos o situaciones del entorno donde esta tecnolog√≠a est√° presente, mediante actividades guiadas con apoyo visual o audiovisual." },
                        { saber: "Asistentes virtuales", indicador: "Reconoce qu√© es un **asistente virtual** y sus funciones a partir de demostraciones guiadas o videos educativos." },
                        { saber: "Desaf√≠os de la IA", indicador: "Identifica los **desaf√≠os de la inteligencia artificial** en la vida cotidiana y algunas recomendaciones para su uso seguro y responsable, con la ayuda de ejemplos guiados." }
                    ]
                }
            },
            II: {
                modulo1: {
                    apropiacion: [
                        { saber: "Hardware (dispositivos computacionales y perif√©ricos)", indicador: "Clasifica componentes de **hardware** seg√∫n su funci√≥n, distinguiendo entre dispositivos computacionales (computadoras de escritorio, port√°tiles, tel√©fonos inteligentes, tabletas) y perif√©ricos (parlantes, micr√≥fonos, aud√≠fonos, impresora, c√°mara, dispositivos de almacenamiento local), en funci√≥n de su uso en contextos cotidianos." },
                        { saber: "Software (sistema, aplicaci√≥n, utilitarios)", indicador: "Reconoce el **software** identificando sus tipos (de sistema, de aplicaci√≥n y utilitarios), valorando su funci√≥n en el uso cotidiano de dispositivos tecnol√≥gicos." },
                        { saber: "Redes de comunicaci√≥n (red local)", indicador: "Reconoce las **redes de comunicaci√≥n** identificando la funcionalidad y aplicaci√≥n de una red local en el intercambio de informaci√≥n entre dispositivos en contextos escolares y/o del hogar." },
                        { saber: "Conexi√≥n entre dispositivos (f√≠sica/inal√°mbrica)", indicador: "Reconoce la **conexi√≥n entre dispositivos** identificando si es f√≠sica (cableada) o inal√°mbrica (bluetooth, wifi), seg√∫n el uso en su entorno cercano." },
                        { saber: "Gesti√≥n de archivos (crear, mover, copiar, renombrar, eliminar)", indicador: "Organiza archivos y carpetas, aplicando acciones b√°sicas como crear, mover, copiar, renombrar y eliminar, en un entorno de sistema operativo para la **gesti√≥n de archivos**." },
                        { saber: "Herramienta de productividad (procesador de texto, editor presentaciones)", indicador: "Utiliza **herramientas de productividad**, como el procesador de texto y/o editor de presentaciones, en la creaci√≥n de contenidos que incluyan texto, im√°genes y formatos b√°sicos, en funci√≥n de una consigna dada." },
                        { saber: "Sistema operativo", indicador: "Identifica la funcionalidad del escritorio en un **sistema operativo**, reconociendo los elementos b√°sicos de la barra de tareas como altavoces, auriculares, estado de la bater√≠a y control de audio, durante el uso cotidiano." },
                        { saber: "Herramientas de creaci√≥n multimedia (audio, video, editor gr√°fico)", indicador: "Aplica **herramientas de creaci√≥n de contenido multimedia**, como el editor gr√°fico, utilizando funciones b√°sicas de creaci√≥n, edici√≥n y guardado de im√°genes en la elaboraci√≥n de productos digitales." }
                    ],
                    programacion: [
                        { saber: "Entorno de programaci√≥n por bloques", indicador: "Utiliza el **entorno de programaci√≥n** **por bloques**, explorando la interfaz y organizando bloques en el √°rea de programaci√≥n en la resoluci√≥n de retos programados." },
                        { saber: "Estado", indicador: "Identifica el concepto de **estado**, reconociendo cambios en las propiedades de orientaci√≥n, direcci√≥n y tama√±o de objetos en la creaci√≥n de un producto programado." },
                        { saber: "Algoritmo (pseudoc√≥digo)", indicador: "Hace uso de **algoritmos** en pseudoc√≥digo utilizando instrucciones de forma l√≥gica y estructurada en la soluci√≥n de un producto programado." },
                        { saber: "Dato (num√©rico, texto)", indicador: "Organiza **datos** tipo num√©rico y de texto, reconociendo su uso en situaciones cotidianas." },
                        { saber: "Variable", indicador: "Gestiona una **variable** en la resoluci√≥n de ejercicios a trav√©s de algoritmos o actividades programadas." },
                        { saber: "Estructuras repetitivas", indicador: "Utiliza **estructuras repetitivas** en pseudoc√≥digo o programaci√≥n por bloques, resolviendo ejercicios que requieran repeticiones controladas." },
                        { saber: "Eventos", indicador: "Utiliza **eventos** en pseudoc√≥digo o programaci√≥n para el control de acciones y reacciones de objetos dentro de un programa, comprendiendo su relaci√≥n de causa y efecto." },
                        { saber: "Estructuras condicionales (simples y compuestas)", indicador: "Utiliza **estructuras condicionales** simples y compuestas en pseudoc√≥digo o programaci√≥n, en la ejecuci√≥n de instrucciones cuando se cumple una condici√≥n espec√≠fica." },
                        { saber: "Operadores aritm√©ticos", indicador: "Utiliza **operadores aritm√©ticos** de suma, resta, multiplicaci√≥n y divisi√≥n en pseudoc√≥digo o programaci√≥n, resolviendo ejercicios que involucren c√°lculos autom√°ticos." },
                        { saber: "Operadores relacionales", indicador: "Utiliza **operadores relacionales** en pseudoc√≥digo o programaci√≥n, comparando valores en la toma de decisiones dentro del programa." }
                    ],
                    computacion: [
                        { saber: "Computaci√≥n f√≠sica", indicador: "Reconoce los componentes b√°sicos de la **computaci√≥n f√≠sica**, como el microcontrolador, sensores, actuadores y el entorno de programaci√≥n, relacion√°ndolos con sus usos y aplicaciones en contextos cotidianos." },
                        { saber: "Circuito el√©ctrico", indicador: "Identifica componentes b√°sicos de un **circuito el√©ctrico**, reconociendo su tipo, el flujo de corriente, la polaridad y la funci√≥n del interruptor durante la construcci√≥n o simulaci√≥n de prototipos." },
                        { saber: "Fundamentos de electr√≥nica (pines entrada/salida, se√±al anal√≥gica/digital)", indicador: "Identifica **fundamentos de electr√≥nica**, reconociendo la funci√≥n de los pines de entrada y salida, as√≠ como la diferencia entre se√±ales anal√≥gicas y digitales durante la construcci√≥n o simulaci√≥n de circuitos." },
                        { saber: "Microcontrolador", indicador: "Reconoce el funcionamiento b√°sico de un **microcontrolador**, identificando los pines digitales y anal√≥gicos, la placa de expansi√≥n y la comunicaci√≥n entre el programa y la tarjeta a trav√©s de actividades pr√°cticas o simuladas." }
                    ],
                    ciencia: [
                        { saber: "Herramientas generativas", indicador: "Reconoce **herramientas digitales generativas** (texto, imagen o audio) que producen contenido a partir de instrucciones sencillas, identificando su aplicaci√≥n en actividades cotidianas de forma √©tica y segura." },
                        { saber: "Desaf√≠os de la IA", indicador: "Reconoce **desaf√≠os de la inteligencia artificial** relacionados con la protecci√≥n de la informaci√≥n personal sensible, cuando se realizan actividades con herramientas digitales." },
                        { saber: "Fundamentos de la IA", indicador: "Identifica los **fundamentos de la inteligencia artificial**, reconociendo c√≥mo aprende, toma decisiones y se diferencia de otros sistemas automatizados en contextos cotidianos." }
                    ]
                },
                modulo2: {
                    apropiacion: [
                        { saber: "Herramientas de creaci√≥n multimedia (editor gr√°fico)", indicador: "Aplica **herramientas de creaci√≥n de contenido multimedia**, como el editor gr√°fico, utilizando funciones b√°sicas de creaci√≥n, edici√≥n y guardado de im√°genes en la elaboraci√≥n de productos digitales." },
                        { saber: "Navegador", indicador: "Utiliza **navegadores** y **buscadores** web en la b√∫squeda de informaci√≥n en internet siguiendo una consigna dada." },
                        { saber: "Buscador", indicador: "Utiliza **navegadores** y **buscadores** web en la b√∫squeda de informaci√≥n en internet siguiendo una consigna dada." },
                        { saber: "Internet", indicador: "Identifica dispositivos que se conectan a **internet** describiendo sus funciones b√°sicas en el contexto de situaciones cotidianas o escolares." },
                        { saber: "Netiqueta", indicador: "Aplica normas de **netiqueta** durante la interacci√≥n en entornos digitales, reconociendo el tono apropiado, la cortes√≠a y el respeto hacia otros usuarios en actividades de comunicaci√≥n sincr√≥nica y asincr√≥nica." },
                        { saber: "Comunicaci√≥n y colaboraci√≥n sincr√≥nica/asincr√≥nica (chat)", indicador: "Identifica el chat como una herramienta de **comunicaci√≥n y colaboraci√≥n sincr√≥nica y asincr√≥nica**, reconociendo sus caracter√≠sticas y su uso en actividades digitales guiadas." },
                        { saber: "Huella digital", indicador: "Identifica los usos e implicaciones de la **huella digital**, reconociendo c√≥mo las acciones realizadas en entornos digitales dejan rastros permanentes relacionados con la privacidad y reputaci√≥n en l√≠nea." },
                        { saber: "Contrase√±as seguras", indicador: "Identifica qu√© es una **contrase√±a segura** y sus elementos b√°sicos, reconociendo su importancia en la protecci√≥n de cuentas y datos personales en entornos digitales." },
                        { saber: "Hackeo (phishing, redes inseguras)", indicador: "Identifica qu√© es **hackeo**, phishing y conexiones inseguras (como redes wifi p√∫blicas), reconociendo situaciones comunes donde pueden presentarse riesgos para la seguridad digital." },
                        { saber: "Software malicioso (virus)", indicador: "Identifica qu√© es un virus inform√°tico como un tipo de **software malicioso**, reconociendo los riesgos que representan para la informaci√≥n y el funcionamiento de los dispositivos." },
                        { saber: "Antivirus", indicador: "Identifica la funci√≥n y caracter√≠sticas de un **antivirus**, reconociendo su importancia en la protecci√≥n de dispositivos digitales utilizados." },
                        { saber: "Almacenamiento en la nube", indicador: "Crea archivos digitales en plataformas de **almacenamiento en la nube**, configurando los permisos de uso compartido para facilitar la colaboraci√≥n en actividades escolares." },
                        { saber: "Referencias bibliogr√°ficas", indicador: "Aplica un formato b√°sico de **referencias bibliogr√°ficas** (autor, t√≠tulo, fuente y a√±o) en las producciones, valorando la atribuci√≥n de las fuentes utilizadas." },
                        { saber: "Internet de las cosas", indicador: "Reconoce aplicaciones del **Internet de las Cosas (IoT)** en la cotidianidad, identificando dispositivos inteligentes conectados que interact√∫an entre s√≠." },
                        { saber: "Moneda virtual", indicador: "Reconoce la utilidad e implicaciones b√°sicas de las **monedas virtuales**, identificando situaciones donde pueden usarse y los riesgos asociados a su manejo en contextos diferentes." },
                        { saber: "Riesgos en l√≠nea (ciberacoso, suplantaci√≥n)", indicador: "Identifica **riesgos en l√≠nea** como ciberacoso, contenido inapropiado y suplantaci√≥n de identidad, aplicando protocolos de riesgo en entornos digitales." },
                        { saber: "Medidas de seguridad en la web (HTTPS, t√©rminos y condiciones)", indicador: "Identifica **medidas de seguridad en la web**, comprendiendo la diferencia entre HTTPS y HTTP y la importancia de lectura de los t√©rminos y condiciones antes de aceptar." }
                    ],
                    programacion: [
                        { saber: "Colecci√≥n de datos (listas, arreglos)", indicador: "Organiza datos en programaci√≥n mediante el uso de listas o agrupaciones de elementos con caracter√≠sticas comunes, como parte del desarrollo de una **colecci√≥n de datos**." },
                        { saber: "Operadores l√≥gicos (Y, O, NO)", indicador: "Reconoce **operadores l√≥gicos** de conjunci√≥n (Y) y disyunci√≥n (O) en la resoluci√≥n de problemas, representando condiciones que deben cumplirse de manera conjunta o alternativa." },
                        { saber: "Procedimientos/funciones", indicador: "Reconoce **procedimientos o funciones** en programaci√≥n, comprendiendo c√≥mo se declaran, invocan y se usan par√°metros y argumentos en la resoluci√≥n de un problema." },
                        { saber: "Dato (booleano)", indicador: "Utiliza **datos** tipo booleano en la resoluci√≥n de problemas en entornos de programaci√≥n, reconociendo su funci√≥n en la toma de decisiones." }
                    ],
                    computacion: [
                        { saber: "Sensor (integrado/externo, VCC, GND)", indicador: "Identifica **sensores** integrados y externos, reconociendo su funcionamiento y la forma de conectarlos a VCC y GND durante la exploraci√≥n o construcci√≥n de prototipos." },
                        { saber: "Actuador (integrado/externo)", indicador: "Identifica **actuadores** integrados y externos, reconociendo c√≥mo se conectan a VCC y GND mientras generan una salida f√≠sica en prototipos." },
                        { saber: "Dom√≥tica", indicador: "Identifica usos y aplicaciones de la **dom√≥tica**, reconociendo c√≥mo la automatizaci√≥n mejora la comodidad y eficiencia en entornos cotidianos." }
                    ],
                    ciencia: [
                        { saber: "Dato (num√©rico, texto, ubicaci√≥n, im√°genes)", indicador: "Identifica el **dato** de tipo num√©rico y de texto en situaciones cotidianas, a partir del registro de informaci√≥n que evidencie su utilidad." },
                        { saber: "Recolecci√≥n de datos (t√©cnicas)", indicador: "Reconoce **t√©cnicas de recolecci√≥n** de datos seg√∫n el tipo de informaci√≥n que se desea obtener en situaciones cotidianas." },
                        { saber: "Almacenamiento de datos", indicador: "Identifica formas de **almacenamiento de datos**, reconociendo c√≥mo se utilizan archivos locales y hojas de c√°lculo en la organizaci√≥n de informaci√≥n relevante en contextos cotidianos." },
                        { saber: "Visualizaci√≥n de datos (gr√°ficos, tablas)", indicador: "Identifica la **visualizaci√≥n de datos** mediante formas de representaci√≥n como gr√°ficos o tablas cuando se observan ejemplos en situaciones cotidianas." },
                        { saber: "Estrategias para presentar datos (tablas)", indicador: "Reconoce las tablas como una **estrategia para presentar datos** organizadamente, a partir de informaci√≥n recolectada en situaciones cotidianas." },
                        { saber: "Fundamentos de la IA", indicador: "Identifica los **fundamentos de la inteligencia artificial**, reconociendo c√≥mo aprende, toma decisiones y se diferencia de otros sistemas automatizados." },
                        { saber: "Herramientas generativas", indicador: "Reconoce **herramientas digitales generativas** que producen contenido a partir de instrucciones sencillas." }
                    ]
                }
            },
            III: {
                modulo1: {
                    apropiacion: [
                        { saber: "Computadora (reglas b√°sicas de uso)", indicador: "Aplica reglas b√°sicas y responsabilidades durante el uso de una **computadora**, contribuyendo al cuidado, seguridad y prolongaci√≥n de su vida √∫til." },
                        { saber: "Hardware (componentes, perif√©ricos, tipos de computadoras)", indicador: "Clasifica tipos de **computadoras** y sus componentes principales de **hardware**, identificando funciones de perif√©ricos comunes al interactuar con dispositivos digitales." },
                        { saber: "Software (tipos, funciones)", indicador: "Distingue los tipos de **software** relacion√°ndolos con sus funciones y usos en tareas cotidianas." },
                        { saber: "Redes de comunicaci√≥n (m√≥dem, router, puntos de acceso)", indicador: "Identifica tipos de **redes de comunicaci√≥n** y sus dispositivos principales (m√≥dem, router y puntos de acceso), explicando su funcionamiento y principios de comunicaci√≥n durante la conexi√≥n a Internet en contextos cotidianos." },
                        { saber: "Sistema operativo (categor√≠as, papelera)", indicador: "Identifica las categor√≠as de los **sistemas operativos** (escritorio y dispositivos m√≥viles), describiendo su funci√≥n b√°sica y el uso de la papelera como herramienta que elimina y/o recupera archivos." },
                        { saber: "Gesti√≥n de archivos (propiedades: tama√±o, tipo, extensi√≥n)", indicador: "Aplica las propiedades (tama√±o, tipo y extensi√≥n) en la **gesti√≥n de archivos** para compartir informaci√≥n en diferentes entornos digitales." },
                        { saber: "Herramientas de creaci√≥n multimedia (editor de gr√°ficos)", indicador: "Dise√±a productos visuales con **herramientas de creaci√≥n multimedia** utilizando editores gr√°ficos, aplicando principios b√°sicos de dise√±os y formatos adecuados seg√∫n la calidad requerida." },
                        { saber: "Conexi√≥n entre dispositivos (IP)", indicador: "Explica c√≥mo las direcciones IP permiten la **conexi√≥n entre dispositivos** y su comunicaci√≥n dentro de una red local o en internet, comprendiendo su funci√≥n en situaciones cotidianas." }
                    ],
                    programacion: [
                        { saber: "Entorno de programaci√≥n textual o por bloques", indicador: "Reconoce un **entorno de programaci√≥n textual o bloques**, identificando sus funciones para aplicarlos en la resoluci√≥n de ejercicios." },
                        { saber: "L√≥gica de programaci√≥n (proposiciones, conectores l√≥gicos, tablas de verdad)", indicador: "Identifica la **l√≥gica de programaci√≥n** con el uso de proposiciones y conectores l√≥gicos (AND, OR, NOT), reconociendo su uso en tablas de verdad para la evaluaci√≥n de expresiones l√≥gicas." },
                        { saber: "Algoritmo (estructura entrada-proceso-salida, caracter√≠sticas)", indicador: "Reconoce el **algoritmo** identificando su estructura (entrada, proceso, salida) y aplicando sus caracter√≠sticas (preciso, finito, definido) como una representaci√≥n clara y ordenada." },
                        { saber: "Dato (tipos, almacenamiento)", indicador: "Identifica tipos de **dato** y formas de almacenamiento, aplic√°ndolos en la creaci√≥n de algoritmos para resolver desaf√≠os programados." },
                        { saber: "Variable (declaraci√≥n, asignaci√≥n)", indicador: "Identifica tipos de **variable**, aplicando su gesti√≥n mediante declaraciones y asignaciones en un entorno de programaci√≥n." },
                        { saber: "Estructuras condicionales", indicador: "Aplica **estructuras condicionales** en un entorno de programaci√≥n para la resoluci√≥n de desaf√≠os que requieran la toma de decisiones l√≥gicas." },
                        { saber: "Estructuras repetitivas", indicador: "Aplica **estructuras repetitivas** en un entorno de programaci√≥n para resolver desaf√≠os que requieren la ejecuci√≥n c√≠clica de instrucciones." },
                        { saber: "Operadores relacionales", indicador: "Aplica **operadores relacionales** para realizar comparaciones dentro de ejercicios de programaci√≥n." },
                        { saber: "Operadores aritm√©ticos", indicador: "Aplica **operadores aritm√©ticos** (suma, resta, multiplicaci√≥n y divisi√≥n) para resolver c√°lculos dentro de ejercicios de programaci√≥n." },
                        { saber: "Operadores l√≥gicos", indicador: "Aplica **operadores l√≥gicos** (Y, O, NO) en la resoluci√≥n de desaf√≠os de programaci√≥n que impliquen decisiones." },
                        { saber: "Evento", indicador: "Aplica un **evento** como acci√≥n que se detona mediante una causa y un efecto al resolver desaf√≠os programados." },
                        { saber: "Procedimientos/funciones", indicador: "Aplica **procedimientos y/o funciones** como estructura modular, a trav√©s de su declaraci√≥n e invocaci√≥n, haciendo uso de par√°metros y argumentos durante la soluci√≥n de desaf√≠os programados." }
                    ],
                    computacion: [
                        { saber: "Robot (tipos, componentes: cuerpo, sistema sensorial, control)", indicador: "Reconoce qu√© es un **robot**, sus tipos y componentes (cuerpo, sistema sensorial y sistema de control), diferenci√°ndolo de otros dispositivos no rob√≥ticos." },
                        { saber: "Rob√≥tica (diferencia con computaci√≥n f√≠sica)", indicador: "Diferencia la **computaci√≥n f√≠sica** con la **rob√≥tica**, identificando c√≥mo los sensores, actuadores y sistemas de control se integran en mecanismos rob√≥ticos." },
                        { saber: "Mec√°nica aplicada a la rob√≥tica (estructura, estabilidad)", indicador: "Emplea principios de la **mec√°nica aplicados a la rob√≥tica**, como la estructura y la estabilidad, en el dise√±o de mecanismos rob√≥ticos." },
                        { saber: "Mecanismos (transmisi√≥n y transformaci√≥n de movimiento)", indicador: "Reconoce los tipos de **mecanismos**, identificando su funci√≥n principal en la transmisi√≥n y transformaci√≥n del movimiento mediante la simulaci√≥n de prototipos." },
                        { saber: "Circuito el√©ctrico (componentes, carga, voltaje, corriente, resistencias)", indicador: "Identifica los componentes de un **circuito el√©ctrico** y su funcionamiento, comprendiendo la relaci√≥n entre carga el√©ctrica, voltaje, corriente, resistencias e interruptores mediante la simulaci√≥n de prototipos." },
                        { saber: "Fundamentos de electr√≥nica (pines, se√±al anal√≥gica/digital)", indicador: "Identifica **fundamentos de electr√≥nica**, reconociendo la funci√≥n de pines de entrada y salida, as√≠ como la diferencia entre se√±ales anal√≥gicas y digitales durante la simulaci√≥n o construcci√≥n de circuitos." },
                        { saber: "Microcontrolador (pines digitales/anal√≥gicos, comunicaci√≥n programa-tarjeta)", indicador: "Comprende los componentes b√°sicos de un **microcontrolador**, aplicando la funci√≥n de pines digitales y anal√≥gicos y c√≥mo se establece la comunicaci√≥n entre el programa y la tarjeta microcontroladora durante la exploraci√≥n o simulaci√≥n de prototipos." }
                    ],
                    ciencia: [
                        { saber: "Fundamentos de la IA", indicador: "Reconoce los **fundamentos de la inteligencia artificial**, identificando el concepto y sus aplicaciones en el contexto personal y laboral." },
                        { saber: "Asistentes virtuales", indicador: "Identifica qu√© son los **asistentes virtuales** basados en inteligencia artificial, reconociendo su utilidad al interactuar con herramientas digitales, bajo criterios de seguridad y responsabilidad." },
                        { saber: "Dato (tipos en redes sociales, historiales, localizaci√≥n)", indicador: "Identifica tipos de **dato** (num√©ricos, de texto, de ubicaci√≥n y de im√°genes), analizando c√≥mo influye en decisiones y/o comportamientos en redes sociales, historiales de navegaci√≥n o sistemas de localizaci√≥n." }
                    ]
                },
                modulo2: {
                    apropiacion: [
                        { saber: "Herramienta de productividad (procesador de texto, editor presentaciones)", indicador: "Aplica la **herramienta de productividad** c√≥mo procesador de texto y/o editor de presentaci√≥n para crear productos comunicativos adecuados al prop√≥sito y contexto de uso." },
                        { saber: "Internet (funcionamiento, ISP, conectividad)", indicador: "Reconoce el funcionamiento de **Internet**, comprendiendo la conectividad entre dispositivos y el rol de los proveedores de servicio (ISP) en el acceso a la red." },
                        { saber: "Navegador (pesta√±as, seguridad)", indicador: "Utiliza el **navegador** y el **buscador** web para acceder y localizar informaci√≥n en l√≠nea, gestionando pesta√±as y aplicando estrategias b√°sicas de b√∫squeda con principios de seguridad digital." },
                        { saber: "Buscador (estrategias b√∫squeda, filtros, dominios confiables)", indicador: "Utiliza el **navegador** y el **buscador** web para acceder y localizar informaci√≥n en l√≠nea, gestionando pesta√±as y aplicando estrategias b√°sicas de b√∫squeda con principios de seguridad digital." },
                        { saber: "Netiqueta", indicador: "Utiliza herramientas de comunicaci√≥n y colaboraci√≥n sincr√≥nica y asincr√≥nica (correo electr√≥nico, chats, videollamadas), aplicando normas de **netiqueta** en la redacci√≥n, interacci√≥n y participaci√≥n respetuosa en entornos digitales." },
                        { saber: "Comunicaci√≥n y colaboraci√≥n sincr√≥nica/asincr√≥nica (correo, chat, videollamada)", indicador: "Utiliza herramientas de **comunicaci√≥n y colaboraci√≥n sincr√≥nica y asincr√≥nica** (correo electr√≥nico, chats, videollamadas), aplicando normas de netiqueta en la redacci√≥n, interacci√≥n y participaci√≥n respetuosa en entornos digitales." },
                        { saber: "Almacenamiento en la nube (guardar, organizar, compartir)", indicador: "Utiliza el **almacenamiento en la nube** para guardar, organizar y compartir archivos digitales, reconociendo sus ventajas en el acceso y colaboraci√≥n desde diferentes dispositivos." },
                        { saber: "Referencias bibliogr√°ficas (autor, t√≠tulo, fuente, fecha)", indicador: "Aplica formatos b√°sicos de **referencias bibliogr√°ficas** en producciones digitales o escritas, integrando datos como autor, t√≠tulo, fuente y fecha, reconociendo la procedencia de la informaci√≥n." },
                        { saber: "Criptomonedas (utilidad, implicaciones)", indicador: "Reconoce la utilidad e implicaciones del uso de **criptomonedas** en entornos digitales cotidianos como juegos, plataformas virtuales o pagos en l√≠nea." },
                        { saber: "Contrase√±as seguras (generadores, doble factor)", indicador: "Crea **contrase√±as seguras** con generadores aleatorios, comprendiendo sus caracter√≠sticas e importancia para la protecci√≥n de la informaci√≥n personal en entornos digitales." },
                        { saber: "Software malicioso (caracter√≠sticas, riesgos)", indicador: "Reconoce las caracter√≠sticas del **software malicioso**, analizando los riesgos asociados al uso de sitios web o aplicaciones potencialmente peligrosas en actividades pr√°cticas." },
                        { saber: "Riesgos en l√≠nea (suplantaci√≥n, grooming, phishing, noticias falsas)", indicador: "Identifica **riesgos en l√≠nea** como la suplantaci√≥n de identidad, grooming, phishing y noticias falsas, analizando acciones b√°sicas de prevenci√≥n en sus interacciones digitales." },
                        { saber: "Plataformas de creaci√≥n de contenido", indicador: "Utiliza **plataformas de creaci√≥n de contenido** digital en la elaboraci√≥n de infograf√≠as, diagramas o presentaciones, organizando la informaci√≥n de forma visual y coherente seg√∫n el prop√≥sito comunicativo." },
                        { saber: "Licencia digital", indicador: "Reconoce la **licencia digital** en el uso de contenido en l√≠nea, valorando sus alcances y limitaciones." },
                        { saber: "Hackeo (tipos de hacker, implicaciones legales)", indicador: "Reconoce el **hackeo** como una amenaza digital, diferenciando tipos de hacker, comprendiendo sus implicaciones legales y valorando medidas para su prevenci√≥n." },
                        { saber: "Antivirus", indicador: "Aplica medidas de protecci√≥n digital mediante el reconocimiento de tipos de **software malicioso** y el uso adecuado del **antivirus**, valorando su actualizaci√≥n como parte de una ciudadan√≠a digital responsable." },
                        { saber: "Redes de comunicaci√≥n (arquitectura, protocolos HTTP/HTTPS/TCP/IP)", indicador: "Reconoce las **redes de comunicaci√≥n** a partir de su arquitectura, protocolos (como HTTP, HTTPS y TCP/IP) e interfaces, comprendiendo su funcionamiento durante el intercambio de datos." },
                        { saber: "Sistema operativo (optimizaci√≥n: memoria, desfragmentar, cach√©)", indicador: "Aplica t√©cnicas de optimizaci√≥n del **sistema operativo**, identificando c√≥mo gestionar memoria, desfragmentar discos, limpiar cach√© y actualizar el sistema para el mejoramiento del desempe√±o de dispositivos." },
                        { saber: "Herramienta de productividad (gestor de bases de datos)", indicador: "Utiliza un **gestor de bases de datos** como herramienta de productividad para la creaci√≥n de tablas, estableciendo relaciones entre ellas y realizando consultas en la organizaci√≥n de la informaci√≥n." },
                        { saber: "Herramientas de creaci√≥n multimedia (modelado 3D)", indicador: "Utiliza **herramientas de creaci√≥n de contenido multimedia** para el modelado 3D, aplicando funciones b√°sicas de creaci√≥n y edici√≥n en productos digitales." },
                        { saber: "Plataformas de creaci√≥n de contenido (encuestas, formularios)", indicador: "Crea encuestas o formularios mediante **plataformas de creaci√≥n de contenido**, ajustando su formato y estructura al prop√≥sito de recolecci√≥n o evaluaci√≥n de datos." },
                        { saber: "Derechos de autor y licenciamiento", indicador: "Reconoce la importancia de los **derechos de autor y el licenciamiento**, aplicando buenas pr√°cticas de uso √©tico y legal de contenidos digitales." },
                        { saber: "Huella digital", indicador: "Analiza la utilidad e implicaciones de la **huella digital**, valorando c√≥mo las acciones en l√≠nea afectan la identidad, reputaci√≥n y seguridad personal en entornos digitales." },
                        { saber: "Riesgos en l√≠nea (acceso inapropiado, ciberadicci√≥n, ciberacoso, sexting)", indicador: "Analiza **riesgos en l√≠nea** (acceso a informaci√≥n inapropiada, ciberadicci√≥n, ciberacoso y sexting), valorando estrategias de prevenci√≥n y autocuidado en sus interacciones digitales." }
                    ],
                    programacion: [
                        { saber: "Colecci√≥n de datos (listas, arreglos)", indicador: "Gestiona una **colecci√≥n de datos** como listas o arreglos mediante su creaci√≥n, recorrido y modificaci√≥n durante la soluci√≥n de ejercicios programados." },
                        { saber: "Operadores l√≥gicos (Y, O, NO)", indicador: "Aplica **operadores l√≥gicos** (Y, O, NO) en la resoluci√≥n de desaf√≠os de programaci√≥n que impliquen decisiones." },
                        { saber: "Procedimientos/funciones (declaraci√≥n, invocaci√≥n, par√°metros, argumentos)", indicador: "Aplica **procedimientos y/o funciones** como estructura modular, a trav√©s de su declaraci√≥n e invocaci√≥n, haciendo uso de par√°metros y argumentos durante la soluci√≥n de desaf√≠os programados." }
                    ],
                    computacion: [
                        { saber: "Sensor (integrado/externo, conexi√≥n VCC/GND)", indicador: "Utiliza un **sensor** integrado y/o externo, comprendiendo su funci√≥n y su correcta conexi√≥n a VCC y GND durante la construcci√≥n o simulaci√≥n de un prototipo." },
                        { saber: "Actuador (integrado/externo)", indicador: "Utiliza un **actuador** integrado y/o externo, comprendiendo su funci√≥n y c√≥mo se conecta correctamente a VCC y GND durante la construcci√≥n o simulaci√≥n de un prototipo." },
                        { saber: "Dom√≥tica (usos, aplicaciones, beneficios)", indicador: "Analiza los usos, aplicaciones y beneficios de la **dom√≥tica**, mediante la creaci√≥n o simulaci√≥n de un prototipo que responda a necesidades reales en un entorno cotidiano." },
                        { saber: "Movimiento en mecanismos (entrada/salida)", indicador: "Identifica el **movimiento en mecanismos** rob√≥ticos, diferenciando el movimiento de entrada y salida, a partir de la observaci√≥n y an√°lisis de simulaciones o prototipos b√°sicos que integren sensores y actuadores." },
                        { saber: "Microcontrolador (pines, VCC/GND, comunicaci√≥n sensores/actuadores)", indicador: "Aplica las funciones de un **microcontrolador**, utilizando pines digitales y anal√≥gicos, conexi√≥n a VCC y GND y comunicaci√≥n con sensores y actuadores durante la simulaci√≥n o construcci√≥n de prototipos." },
                        { saber: "Prototipos (dise√±o e integraci√≥n de sensores, actuadores)", indicador: "Construye **prototipos** que integren sensores, actuadores y un microcontrolador, a partir de una necesidad identificada en su contexto." }
                    ],
                    ciencia: [
                        { saber: "Dato (organizaci√≥n, conservaci√≥n, seguridad, responsabilidad)", indicador: "Reconoce la importancia de la organizaci√≥n y conservaci√≥n del **dato**, aplicando criterios de seguridad y responsabilidad en la gesti√≥n de informaci√≥n." },
                        { saber: "Recolecci√≥n de datos (registros escolares/personales)", indicador: "Aplica **t√©cnicas de recolecci√≥n de datos** mediante registros escolares y personales (gastos, notas, actividades deportivas o datos m√©dicos simples), organizando la informaci√≥n en tablas." },
                        { saber: "Almacenamiento de datos (ciclo de vida: creaci√≥n, uso, conservaci√≥n, eliminaci√≥n)", indicador: "Reconoce el ciclo de vida del dato en el **almacenamiento de datos**, identificando las etapas de creaci√≥n, uso, conservaci√≥n y eliminaci√≥n responsable de la informaci√≥n en contextos educativos o personales." },
                        { saber: "Visualizaci√≥n de datos", indicador: "Aplica t√©cnicas de **visualizaci√≥n de datos**, creando representaciones gr√°ficas simples como gr√°ficos pict√≥ricos o de barras para comunicar informaci√≥n." },
                        { saber: "Estrategias para presentar datos", indicador: "Crea gr√°ficos de barras o lineales a partir de datos, aplicando **estrategias para representar datos** en la comunicaci√≥n de informaci√≥n relevante." },
                        { saber: "Fundamentos de la IA (funcionamiento, diferencia con otros sistemas)", indicador: "Reconoce los **fundamentos de la inteligencia artificial**, identificando c√≥mo funciona y se diferencia de otros sistemas digitales." },
                        { saber: "Herramientas generativas (texto, imagen, audio, seguridad, responsabilidad)", indicador: "Utiliza **herramientas generativas** basadas en inteligencia artificial, aplicando funciones para la creaci√≥n o modificaci√≥n de contenido digital (texto, imagen o audio) respetando criterios de seguridad y responsabilidad." },
                        { saber: "Desaf√≠os de la IA (sesgos, manipulaci√≥n, dependencia, privacidad)", indicador: "Reconoce los **desaf√≠os de la inteligencia artificial**, identificando riesgos como sesgos, manipulaci√≥n de informaci√≥n, dependencia tecnol√≥gica y privacidad de datos, reflexionando sobre su impacto en la vida laboral, personal y social." }
                    ]
                }
            }
        };

        // ========== MAPEO SABER -> JUEGO ==========
        const mapaJuegos = {
            "Hardware": { plataforma: "Educaplay", tipo: "relacionar columnas", url: "https://www.educaplay.com/editor-de-recursos/" },
            "Software": { plataforma: "Educaplay", tipo: "sopa de letras", url: "https://www.educaplay.com/editor-de-recursos/" },
            "Algoritmo": { plataforma: "Scratch", tipo: "secuencia", url: "https://scratch.mit.edu/projects/editor/" },
            "Robot": { plataforma: "Scratch", tipo: "programaci√≥n", url: "https://scratch.mit.edu/projects/editor/" },
            "Dato": { plataforma: "Quizizz", tipo: "cuestionario", url: "https://quizizz.com/admin" },
            "Variable": { plataforma: "Quizizz", tipo: "completar", url: "https://quizizz.com/admin" },
            "Evento": { plataforma: "Scratch", tipo: "causa-efecto", url: "https://scratch.mit.edu/projects/editor/" },
            "Sensor": { plataforma: "Genially", tipo: "infograf√≠a", url: "https://genially.com/es/" }
        };

        // ========== VARIABLES GLOBALES ==========
        let saberesSeleccionados = [];
        let ytApiKey = localStorage.getItem('ytApiKey') || '';
        let hfApiKey = localStorage.getItem('hfApiKey') || '';

        // Elementos DOM
        const cicloSelect = document.getElementById('cicloSelect');
        const nivelSelect = document.getElementById('nivelSelect');
        const modulo1Div = document.getElementById('modulo1Container');
        const modulo2Div = document.getElementById('modulo2Container');
        const contadorSel = document.getElementById('contadorSel');
        const listaSel = document.getElementById('saberesSeleccionadosList');
        const sugerirJuegoBtn = document.getElementById('sugerirJuegoBtn');
        const modal = document.getElementById('herramientasModal');
        const cerrarModal = document.getElementById('cerrarModal');
        const modalSaberes = document.getElementById('modalSaberes');
        const busquedaEducaplay = document.getElementById('busquedaEducaplay');
        const buscarEducaplayBtn = document.getElementById('buscarEducaplayBtn');
        const herramientasCards = document.querySelectorAll('.herramienta-card');
        const crearJuegoBtn = document.getElementById('crearJuegoBtn');
        const juegoGenerado = document.getElementById('juegoGenerado');
        const buscarYoutube = document.getElementById('buscarYoutubeBtn');
        const youtubeInput = document.getElementById('youtubeSearch');
        const youtubeResultados = document.getElementById('youtubeResultados');
        const ytApiKeyInput = document.getElementById('ytApiKey');
        const hfApiKeyInput = document.getElementById('hfApiKey');

        // Cargar keys guardadas
        if (ytApiKeyInput) ytApiKeyInput.value = ytApiKey;
        if (hfApiKeyInput) hfApiKeyInput.value = hfApiKey;

        ytApiKeyInput?.addEventListener('change', (e) => {
            localStorage.setItem('ytApiKey', e.target.value);
            ytApiKey = e.target.value;
        });
        hfApiKeyInput?.addEventListener('change', (e) => {
            localStorage.setItem('hfApiKey', e.target.value);
            hfApiKey = e.target.value;
        });

        // ========== FUNCIONES ==========
        function renderNiveles() {
            const niveles = { preescolar: ['Materno Infantil', 'Transici√≥n'], I: ['1¬∞', '2¬∞', '3¬∞'], II: ['4¬∞', '5¬∞', '6¬∞'], III: ['7¬∞', '8¬∞', '9¬∞'] };
            nivelSelect.innerHTML = niveles[cicloSelect.value].map(n => `<option>${n}</option>`).join('');
            renderSaberes();
        }

        function renderSaberes() {
            const ciclo = cicloSelect.value;
            const data = saberesDB[ciclo] || saberesDB.preescolar;
            renderModulo(modulo1Div, data.modulo1, 'mod1');
            renderModulo(modulo2Div, data.modulo2, 'mod2');
            saberesSeleccionados = [];
            actualizarSeleccion();
        }

        function renderModulo(container, modData, modId) {
            let html = '';
            Object.entries(modData).forEach(([area, saberes]) => {
                if (saberes.length) {
                    html += `<div class="mb-4"><div class="font-semibold text-xs text-gray-500 mb-1">${area}</div>`;
                    saberes.forEach(s => {
                        html += `<button data-mod="${modId}" data-area="${area}" data-saber="${s.saber}" data-indicador="${s.indicador}" class="saber-chip text-xs px-3 py-1.5 m-1 rounded-full">${s.saber}</button>`;
                    });
                    html += '</div>';
                }
            });
            container.innerHTML = html;
            container.querySelectorAll('.saber-chip').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const saber = btn.dataset.saber;
                    const idx = saberesSeleccionados.findIndex(s => s.saber === saber);
                    if (idx >= 0) {
                        saberesSeleccionados.splice(idx, 1);
                        btn.classList.remove('selected', 'bg-[#09b7ae]', 'text-white');
                    } else {
                        if (saberesSeleccionados.length >= 2) return alert('M√°ximo 2 saberes');
                        saberesSeleccionados.push({ 
                            saber, 
                            indicador: btn.dataset.indicador,
                            area: btn.dataset.area, 
                            modulo: btn.dataset.mod 
                        });
                        btn.classList.add('selected', 'bg-[#09b7ae]', 'text-white');
                    }
                    actualizarSeleccion();
                });
            });
        }

        function actualizarSeleccion() {
            contadorSel.innerText = saberesSeleccionados.length;
            listaSel.innerHTML = saberesSeleccionados.map(s => 
                `<span class="bg-[#09b7ae] bg-opacity-20 text-[#014d6b] text-xs px-3 py-1.5 rounded-full">${s.saber}</span>`
            ).join('');
        }

        // ========== MODAL ==========
        sugerirJuegoBtn.addEventListener('click', () => {
            if (!saberesSeleccionados.length) return alert('Selecciona un saber');
            const nombres = saberesSeleccionados.map(s => s.saber).join(' + ');
            modalSaberes.textContent = nombres;
            busquedaEducaplay.value = nombres;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        });

        cerrarModal.addEventListener('click', () => {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
        });

        herramientasCards.forEach(card => {
            card.addEventListener('click', () => {
                window.open(card.dataset.url, '_blank');
            });
        });

        buscarEducaplayBtn.addEventListener('click', () => {
            const q = busquedaEducaplay.value.trim();
            if (q) window.open(`https://www.educaplay.com/search/?q=${encodeURIComponent(q)}`, '_blank');
        });

        // ========== GENERADOR DE JUEGOS IA ==========
        crearJuegoBtn.addEventListener('click', async () => {
            if (!saberesSeleccionados.length) return alert('Selecciona saberes');
            
            juegoGenerado.innerHTML = '<p class="text-center"><i class="fas fa-spinner fa-spin"></i> Generando juego...</p>';
            
            const saberesStr = saberesSeleccionados.map(s => s.saber).join(' y ');
            const prompt = `Crea un juego de aula para educaci√≥n primaria sobre ${saberesStr}. 
Incluye:
1. T√≠tulo creativo
2. Objetivo de aprendizaje
3. Materiales necesarios
4. Instrucciones paso a paso
5. Variante para estudiantes con NEE`;

            try {
                if (hfApiKey) {
                    const response = await fetch('https://api-inference.huggingface.co/models/mistralai/Mistral-7B-Instruct-v0.1', {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${hfApiKey}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ inputs: prompt })
                    });
                    const data = await response.json();
                    const texto = Array.isArray(data) ? data[0]?.generated_text : data.generated_text;
                    juegoGenerado.innerHTML = `<div class="whitespace-pre-wrap text-sm">${texto || 'No se pudo generar'}</div>`;
                } else {
                    juegoGenerado.innerHTML = `
                        <div class="text-sm">
                            <p class="font-bold text-[#014d6b]">üé≤ Juego: La aventura de ${saberesStr}</p>
                            <p class="mt-2"><span class="font-medium">üéØ Objetivo:</span> Comprender ${saberesStr}.</p>
                            <p><span class="font-medium">üì¶ Materiales:</span> Tarjetas, dados.</p>
                            <p><span class="font-medium">üìã Instrucciones:</span> Por turnos, responden preguntas.</p>
                            <p class="mt-2 text-purple-600"><i class="fas fa-universal-access mr-1"></i> Variante DUA: Pictogramas.</p>
                        </div>
                    `;
                }
            } catch (e) {
                juegoGenerado.innerHTML = `<p class="text-red-500">Error: ${e.message}</p>`;
            }
        });

        // ========== YOUTUBE API ==========
        buscarYoutube.addEventListener('click', async () => {
            const query = youtubeInput.value.trim();
            if (!query) return;
            
            youtubeResultados.innerHTML = '<p class="text-center"><i class="fas fa-spinner fa-spin"></i> Buscando...</p>';
            
            if (!ytApiKey) {
                youtubeResultados.innerHTML = '<p class="text-red-500">‚ö†Ô∏è Configura la API Key de YouTube</p>';
                return;
            }

            try {
                const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=6&q=${encodeURIComponent(query)}+educativo&type=video&videoCaption=closedCaption&videoDuration=short&key=${ytApiKey}`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.error) {
                    youtubeResultados.innerHTML = `<p class="text-red-500">Error API: ${data.error.message}</p>`;
                    return;
                }

                youtubeResultados.innerHTML = '';
                data.items.forEach(item => {
                    const videoId = item.id.videoId;
                    const snippet = item.snippet;
                    const div = document.createElement('div');
                    div.className = 'video-result bg-gray-50 p-3 rounded-lg flex gap-3 cursor-pointer hover:bg-gray-100';
                    div.innerHTML = `
                        <img src="${snippet.thumbnails.default.url}" class="w-20 h-16 rounded object-cover">
                        <div class="flex-1">
                            <p class="font-medium text-sm line-clamp-2">${snippet.title}</p>
                            <p class="text-xs text-gray-500">${snippet.channelTitle}</p>
                            <div class="flex gap-2 mt-1 text-xs">
                                <span class="bg-green-100 text-green-700 px-2 rounded-full"><i class="fas fa-closed-captioning"></i> CC</span>
                                <span class="bg-blue-100 text-blue-700 px-2 rounded-full"><i class="fas fa-clock"></i> Corto</span>
                            </div>
                        </div>
                    `;
                    div.addEventListener('click', () => window.open(`https://youtube.com/watch?v=${videoId}`, '_blank'));
                    youtubeResultados.appendChild(div);
                });
            } catch (e) {
                youtubeResultados.innerHTML = `<p class="text-red-500">Error: ${e.message}</p>`;
            }
        });

        // ========== TABS ==========
        const tabs = { plan: 'tabPlan', recursos: 'tabRecursos', admin: 'tabAdmin' };
        document.getElementById('tabPlanBtn').addEventListener('click', () => mostrarTab('plan'));
        document.getElementById('tabRecursosBtn').addEventListener('click', () => mostrarTab('recursos'));
        document.getElementById('tabAdminBtn').addEventListener('click', () => mostrarTab('admin'));

        function mostrarTab(tab) {
            Object.keys(tabs).forEach(t => document.getElementById(tabs[t]).classList.add('hidden'));
            document.getElementById(tabs[tab]).classList.remove('hidden');
        }

        // ========== INICIALIZAR ==========
        renderNiveles();
        cicloSelect.addEventListener('change', renderNiveles);

        // Historial
        const recentList = document.getElementById('recentList');
        recentList.innerHTML = '<li>Hardware + Algoritmo (I Ciclo)</li><li>Robot + Evento (Preescolar)</li>';
    </script>
</body>
</html>
